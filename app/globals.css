/* app/global.css */

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

@layer base {
  :root {
    /* Brand: Cream #F5EEDC - Warm, approachable background like main site */
    --background: 42 56% 91%;
    /* Brand: Charcoal #333333 - Body text */
    --foreground: 0 0% 20%;
    /* Subtle off-white for cards - barely noticeable elevation */
    --card: 0 0% 98%;
    --card-foreground: 0 0% 20%;
    /* Brand: Cream - Popover backgrounds */
    --popover: 42 56% 91%;
    --popover-foreground: 0 0% 20%;
    /* Brand: Deep Blue #004D70 - Primary actions */
    --primary: 199 100% 22%;
    --primary-foreground: 0 0% 100%;
    /* Very light gray for secondary actions */
    --secondary: 0 0% 96%;
    --secondary-foreground: 0 0% 20%;
    /* Muted backgrounds - subtle */
    --muted: 0 0% 96%;
    --muted-foreground: 0 0% 45%;
    /* Brand: Deep Teal #004D4D - Accent/links/headers TEXT */
    --accent: 180 100% 15%;
    --accent-foreground: 0 0% 100%;
    /* Destructive/errors - warm red with better contrast */
    --destructive: 0 70% 50%;
    --destructive-foreground: 0 0% 100%;
    /* Brand: Light Gray #E5E5E5 - Borders */
    --border: 0 0% 90%;
    --input: 0 0% 96%;
    /* Brand: Deep Blue - Focus rings */
    --ring: 199 100% 22%;
    /* Semantic roles (centralize status colors) */
    --info: 180 100% 15%;
    /* Deep Teal (accent) as informational tone */
    --warning: 42 100% 70%;
    /* Warm Gold for warnings/limited info */
    /* Brand: Warm Gold #FFD166 */
    --chart-1: 42 100% 70%;
    /* Brand: Deep Teal #004D4D */
    --chart-2: 180 100% 15%;
    /* Brand: Royal Purple #5D4777 */
    --chart-3: 268 25% 37%;
    /* Brand: Sage Green #A3B18A */
    --chart-4: 82 21% 62%;
    /* Brand: Mint Green #5ABFB1 */
    --chart-5: 172 43% 55%;
    --radius: 1rem;
    /* Success messages - bright green */
    --success: 142 50% 45%;
    --success-foreground: 0 0% 100%;
    /* Brand: Sage Green #A3B18A - User message bubbles */
    --user-message: 82 21% 62%;
    --user-message-foreground: 0 0% 20%;
    /* Brand: Deep Blue #004D70 - Parrot message bubbles */
    --parrot-message: 199 100% 22%;
    --parrot-message-foreground: 0 0% 100%;
    /* Sidebar - Matches background for cohesion */
    --sidebar-background: 42 56% 91%;
    --sidebar-foreground: 0 0% 20%;
    --sidebar-primary: 0 0% 20%;
    --sidebar-primary-foreground: 0 0% 98%;
    /* Brand: Mint Green #5ABFB1 - Sidebar active states */
    --sidebar-accent: 172 43% 55%;
    --sidebar-accent-foreground: 0 0% 20%;
    --sidebar-border: 0 0% 88%;
    --sidebar-ring: 199 100% 22%;
  }

  .dark {
    /* Dark background - very dark charcoal */
    --background: 0 0% 10%;
    /* Pure white for text readability */
    --foreground: 0 0% 98%;
    /* Darker card background */
    --card: 0 0% 15%;
    --card-foreground: 0 0% 98%;
    /* Dark popover */
    --popover: 0 0% 12%;
    --popover-foreground: 0 0% 98%;
    /* Brand: Deep Blue - Lighter for dark mode */
    --primary: 199 100% 35%;
    --primary-foreground: 0 0% 98%;
    /* Lighter secondary for dark mode */
    --secondary: 0 0% 20%;
    --secondary-foreground: 0 0% 98%;
    /* Muted dark backgrounds */
    --muted: 0 0% 20%;
    --muted-foreground: 0 0% 70%;
    /* Brand: Deep Teal - Lighter for dark mode */
    --accent: 180 100% 30%;
    --accent-foreground: 0 0% 98%;
    /* Destructive/errors - brighter for dark mode visibility */
    --destructive: 0 70% 55%;
    --destructive-foreground: 0 0% 98%;
    /* Dark borders */
    --border: 0 0% 25%;
    --input: 0 0% 25%;
    /* Light ring for dark mode */
    --ring: 0 0% 98%;
    /* Semantic roles (dark mode adjustments) */
    --info: 180 100% 30%;
    --warning: 42 100% 70%;
    /* Brand colors - adjusted for dark mode */
    --chart-1: 42 100% 70%;
    --chart-2: 180 100% 30%;
    --chart-3: 268 35% 55%;
    --chart-4: 82 25% 65%;
    --chart-5: 172 50% 60%;
    /* Success - brighter for dark mode */
    --success: 142 60% 50%;
    --success-foreground: 0 0% 98%;
    /* Brand: Sage Green - Darker with white text (inverted for dark mode) */
    --user-message: 82 25% 35%;
    --user-message-foreground: 0 0% 98%;
    /* Brand: Deep Blue - Lighter for dark mode */
    --parrot-message: 199 100% 35%;
    --parrot-message-foreground: 0 0% 98%;
    /* Dark sidebar */
    --sidebar-background: 0 0% 8%;
    --sidebar-foreground: 0 0% 98%;
    --sidebar-primary: 199 100% 35%;
    --sidebar-primary-foreground: 0 0% 98%;
    /* Brand: Mint Green - Sidebar active (slightly lighter) */
    --sidebar-accent: 172 45% 45%;
    --sidebar-accent-foreground: 0 0% 98%;
    --sidebar-border: 0 0% 20%;
    --sidebar-ring: 199 100% 35%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans), sans-serif;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-serif), var(--font-serif-lora), var(--font-serif-spectral), serif;
    font-weight: 600;
  }

  h1, h2 { letter-spacing: -0.01em; }
  h3 { letter-spacing: -0.005em; }
}

@layer components {
  .sidebar-button {
    background-color: transparent;
    transition: background-color 0.2s;
  }

  .sidebar-button:hover {
    background-color: hsl(var(--sidebar-accent) / 0.3);
  }

  .sidebar-button[data-active="true"] {
    background-color: hsl(var(--sidebar-accent));
    color: hsl(var(--sidebar-accent-foreground));
  }

  /* Brand: Deep Teal text on cream background - matches main site header */
  /* Header dynamically adjusts height: 3.5rem (expanded) → 3rem (scrolled) */
  .app-header {
    background-color: hsl(var(--background));
    color: hsl(var(--accent));
    border-bottom: 1px solid hsl(var(--border));
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease-in-out;
  }

  .dark .app-header {
    background-color: hsl(var(--card));
    color: hsl(var(--foreground));
    border-bottom: 1px solid hsl(var(--border));
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  }

  .app-header a {
    color: hsl(var(--accent));
    transition: color 0.2s ease-in-out;
  }

  .dark .app-header a {
    color: hsl(var(--foreground));
  }

  .app-header a:hover {
    color: hsl(var(--accent) / 0.7);
  }

  .dark .app-header a:hover {
    color: hsl(var(--foreground) / 0.7);
  }

  /* Logo stands out with larger size and slight weight */
  /* Dynamically adjusts: 3rem (expanded) → 2rem (scrolled) with text fade */
  .app-logo {
    font-size: 1.25rem;
    font-weight: 700;
    letter-spacing: -0.025em;
    transition: all 0.3s ease-in-out;
  }

  /* Header separator - visible in both modes */
  .header-separator {
    background-color: hsl(var(--accent) / 0.3);
  }

  .dark .header-separator {
    background-color: hsl(var(--border));
  }

  /* Apple Liquid Glass Effect */
  .liquid-glass-header {
    position: relative;
    background: rgba(245, 238, 220, 0.15) !important;
    backdrop-filter: blur(20px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
    border: none !important;
    border-top: none !important;
    box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15),
      inset 0 2px 20px rgba(245, 238, 220, 0.2) !important;
  }

  .dark .liquid-glass-header {
    background: rgba(0, 0, 0, 0.25) !important;
    backdrop-filter: blur(20px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
    border: none !important;
    border-top: none !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1),
      inset 0 2px 20px rgba(255, 255, 255, 0.05) !important;
  }

  .liquid-glass-header::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(245, 238, 220, 0.1);
    backdrop-filter: blur(1px);
    -webkit-backdrop-filter: blur(1px);
    box-shadow: inset -10px -8px 0px -11px rgba(245, 238, 220, 1),
      inset 0px -9px 0px -8px rgba(245, 238, 220, 1);
    opacity: 0.6;
    z-index: -1;
    filter: blur(1px) brightness(115%);
    pointer-events: none;
  }

  .dark .liquid-glass-header::after {
    background: rgba(255, 255, 255, 0.02);
    box-shadow: inset -10px -8px 0px -11px rgba(255, 255, 255, 0.1),
      inset 0px -9px 0px -8px rgba(255, 255, 255, 0.08);
    opacity: 0.25;
    filter: blur(1px) brightness(105%);
  }

  /* Liquid Glass Pill for mobile chat header */
  .liquid-glass-pill {
    position: relative;
    background: rgba(255, 255, 255, 0.2) !important;
    backdrop-filter: blur(16px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(16px) saturate(180%) !important;
    border: 1px solid rgba(255, 255, 255, 0.4) !important;
    box-shadow: 0 4px 20px rgba(31, 38, 135, 0.2),
      inset 0 2px 12px rgba(255, 255, 255, 0.3) !important;
  }

  .dark .liquid-glass-pill {
    background: rgba(0, 0, 0, 0.3) !important;
    backdrop-filter: blur(16px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(16px) saturate(180%) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4),
      inset 0 2px 12px rgba(255, 255, 255, 0.15) !important;
  }

  .liquid-glass-pill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 9999px;
    backdrop-filter: blur(1px);
    -webkit-backdrop-filter: blur(1px);
    box-shadow: inset -8px -6px 0px -9px rgba(255, 255, 255, 1),
      inset 0px -7px 0px -6px rgba(255, 255, 255, 1);
    opacity: 0.5;
    z-index: -1;
    filter: blur(1px) brightness(110%);
    pointer-events: none;
  }

  .dark .liquid-glass-pill::after {
    background: rgba(255, 255, 255, 0.02);
    box-shadow: inset -8px -6px 0px -9px rgba(255, 255, 255, 0.13),
      inset 0px -7px 0px -6px rgba(255, 255, 255, 0.12);
    opacity: 0.2;
    filter: blur(1px) brightness(105%);
  }

  /*
   * Status utilities
   * Centralized, brand-aligned color treatments for status chips and alerts
   */
  .status--confessional {
    background-color: hsl(var(--primary) / 0.15) !important;
    border: 1px solid hsl(var(--primary) / 0.30) !important;
    color: hsl(var(--primary)) !important;
  }

  .dark .status--confessional {
    background-color: hsl(var(--primary) / 0.10) !important;
    border: 1px solid hsl(var(--primary) / 0.20) !important;
    color: hsl(var(--primary)) !important;
  }

  .status--recommended {
    background-color: hsl(var(--success) / 0.15) !important;
    border: 1px solid hsl(var(--success) / 0.30) !important;
    color: hsl(var(--success)) !important;
  }

  .dark .status--recommended {
    background-color: hsl(var(--success) / 0.12) !important;
    border: 1px solid hsl(var(--success) / 0.25) !important;
    color: hsl(var(--success)) !important;
  }

  .status--info {
    background-color: hsl(var(--info) / 0.15) !important;
    border: 1px solid hsl(var(--info) / 0.30) !important;
    color: hsl(var(--info)) !important;
  }

  .dark .status--info {
    background-color: hsl(var(--info) / 0.12) !important;
    border: 1px solid hsl(var(--info) / 0.25) !important;
    color: hsl(var(--info)) !important;
  }

  .status--warning {
    background-color: hsl(var(--warning) / 0.30) !important;
    border: 1px solid hsl(var(--warning) / 0.45) !important;
    color: hsl(32 90% 30%) !important;
    /* readable warm gold text */
  }

  .dark .status--warning {
    background-color: hsl(var(--warning) / 0.18) !important;
    border: 1px solid hsl(var(--warning) / 0.35) !important;
    color: hsl(var(--warning)) !important;
  }

  .status--danger {
    background-color: hsl(var(--destructive) / 0.12) !important;
    border: 1px solid hsl(var(--destructive) / 0.40) !important;
    color: hsl(var(--destructive)) !important;
  }

  .dark .status--danger {
    background-color: hsl(var(--destructive) / 0.15) !important;
    border: 1px solid hsl(var(--destructive) / 0.45) !important;
    color: hsl(var(--destructive)) !important;
  }

  /* Optional text-only helpers (for icons/titles in alerts) */
  .status-text--confessional {
    color: hsl(var(--primary)) !important;
  }

  .status-text--recommended {
    color: hsl(var(--success)) !important;
  }

  .status-text--info {
    color: hsl(var(--info)) !important;
  }

  .status-text--warning {
    color: hsl(32 90% 30%) !important;
  }

  .dark .status-text--warning {
    color: hsl(var(--warning)) !important;
  }

  .status-text--danger {
    color: hsl(var(--destructive)) !important;
  }

  /* Badge utilities (shared across list and detail) */
  .badge--neutral {
    background-color: hsl(var(--muted) / 0.7) !important;
    border: 1px solid hsl(var(--border)) !important;
    color: hsl(var(--foreground) / 0.8) !important;
    border-radius: 9999px !important;
  }

  .badge--red-flag {
    background-color: hsl(var(--destructive) / 0.1) !important;
    border: 1px solid hsl(var(--destructive) / 0.4) !important;
    color: hsl(var(--destructive)) !important;
    border-radius: 9999px !important;
  }

  .dark .badge--red-flag {
    background-color: hsl(var(--destructive) / 0.15) !important;
    border: 1px solid hsl(var(--destructive) / 0.45) !important;
    color: hsl(var(--destructive)) !important;
  }

  .badge--info {
    background-color: hsl(var(--info) / 0.1) !important;
    border: 1px solid hsl(var(--info) / 0.4) !important;
    color: hsl(var(--info)) !important;
    border-radius: 9999px !important;
  }

  .dark .badge--info {
    background-color: hsl(var(--info) / 0.15) !important;
    border: 1px solid hsl(var(--info) / 0.45) !important;
    color: hsl(var(--info)) !important;
  }
}